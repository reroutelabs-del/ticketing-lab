<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>View Tickets</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container-fluid">
      <a class="navbar-brand" href="/">ðŸŽ« Ticketing System</a>
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="/submit">Submit Ticket</a></li>
        <li class="nav-item"><a class="nav-link active" href="/tickets">View Tickets</a></li>
      </ul>
    </div>
  </nav>

  <div class="container mt-5">
    <h2>ðŸ“‹ Submitted Tickets</h2>
    {% if tickets %}
    <table class="table table-bordered shadow-sm bg-white">
      <thead class="table-dark">
        <tr>
          <th>ID</th>
          <th>User</th>
          <th>Issue</th>
          <th>Priority</th>
          <th>Status</th>
          <th>Created</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for ticket in tickets %}
        <tr>
          <td>{{ ticket.ticket_id }}</td>
          <td>{{ ticket.user }}</td>
          <td>{{ ticket.issue }}</td>
          <td>
            <span class="badge 
              {% if ticket.priority == 'High' %} bg-danger
              {% elif ticket.priority == 'Medium' %} bg-warning text-dark
              {% else %} bg-success {% endif %}">
              {{ ticket.priority }}
            </span>
          </td>
          <td>
            <span class="badge 
              {% if ticket.status == 'Open' %} bg-info
              {% elif ticket.status == 'In Progress' %} bg-warning text-dark
              {% elif ticket.status == 'Closed' %} bg-success
              {% else %} bg-secondary {% endif %}">
              {{ ticket.status }}
            </span>
          </td>
          <td>{{ ticket.created_at }}</td>
          <td>
            {% if ticket.status != 'Closed' %}
              <a href="/edit/{{ ticket.ticket_id }}" class="btn btn-sm btn-outline-primary">Edit</a>
              <a href="/resolve/{{ ticket.ticket_id }}" class="btn btn-sm btn-outline-success">Resolve</a>
            {% else %}
              <span class="text-muted">Closed</span>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
      <p>No tickets found.</p>
    {% endif %}
  </div>
</body>
</html>
